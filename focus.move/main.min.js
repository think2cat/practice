(function(){function n(d){var b=navigator.userAgent.toLowerCase();if(null===d.parentNode||"none"==d.style.display)return!1;var c=null,a=[];if(d.getBoundingClientRect)return b=d.getBoundingClientRect(),d=Math.max(document.documentElement.scrollTop,document.body.scrollTop),c=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),{x:b.left+c,y:b.top+d};if(document.getBoxObjectFor)b=document.getBoxObjectFor(d),a=[b.x-(d.style.borderLeftWidth?parseInt(d.style.borderLeftWidth):0),b.y-(d.style.borderTopWidth?
parseInt(d.style.borderTopWidth):0)];else{a=[d.offsetLeft,d.offsetTop];c=d.offsetParent;if(c!=d)for(;c;)a[0]+=c.offsetLeft,a[1]+=c.offsetTop,c=c.offsetParent;if(-1!=b.indexOf("opera")||-1!=b.indexOf("safari")&&"absolute"==d.style.position)a[0]-=document.body.offsetLeft,a[1]-=document.body.offsetTop}for(c=d.parentNode?d.parentNode:null;c&&"BODY"!=c.tagName&&"HTML"!=c.tagName;)a[0]-=c.scrollLeft,a[1]-=c.scrollTop,c=c.parentNode?c.parentNode:null;return{x:a[0],y:a[1]}}for(var b=[],l=document.getElementsByTagName("a"),
f=0;f<l.length;f++){var h=n(l[f]);h.a=l[f];for(var m=!1,k=0;k<b.length;k++)if(20>=Math.abs(h.y-b[k][0].y)){b[k].push(h);m=!0;break}m||b.push([h])}for(f=0;f<b.length;f++)b[f].sort(function(b,g){return b.x-g.x});b[0]&&b[0][0].a.focus();document.addEventListener("keydown",function(d){if(0==b.length)return!1;for(var g=document.activeElement,c=null,a=null,e=0;e<b.length;e++)for(var f=0;f<b[e].length;f++)if(g==b[e][f].a){c=b[e][f];a=[e,f];break}!c&&(b[0]&&b[0][0])&&(c=b[0][0],a=[0,0]);e=d.keyCode;if(37==
e&&0<a[1]||39==e&&b[a[0]].length>a[1]+1)a[1]-=37==e?1:-1,a=b[a[0]][a[1]],a.a.focus();else if(38==e&&0<a[0]||40==e&&b.length>a[0]+1){a=b[a[0]-(38==e?1:-1)];d=Math.abs(0-c.x);g=null;for(e=0;e<a.length;e++)if(Math.abs(a[e].x-c.x)<d)d=Math.abs(a[e].x-c.x),g=a[e];else if(g&&Math.abs(a[e].x-c.x)>d)break;g||(g=a[0]);g&&g.a.focus()}},!1)})();
